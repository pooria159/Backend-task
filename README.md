# مستندات پروژه Backend - BookNama

## 📋 معرفی پروژه

این پروژه مربوط به پیاده‌سازی **سیستم مدیریت کتابخانه آنلاین** می‌باشد.
هدف اصلی پروژه ارائه یک **Backend کامل با REST API** برای مدیریت کتاب‌ها، امانت‌دهی، کاربران و دسترسی‌ها است. علاوه بر آن، **سیستم داوری خودکار (Judge)** برای بررسی صحت کد و تست‌های کاربر در نظر گرفته شده است.

این پروژه با استفاده از **Django و Django REST Framework** پیاده‌سازی شده است.

---

## 🎯 اهداف پروژه

* طراحی و پیاده‌سازی API برای عملیات CRUD کتاب‌ها
* مدیریت کاربران با نقش‌های Member، Librarian و Admin
* مدیریت امانت‌دهی و بازگرداندن کتاب‌ها
* پیاده‌سازی **سیستم مجوز دسترسی (Permissions)**
* ایجاد تست‌های خودکار با استفاده از Django TestCase و APITestCase
* توسعه یک سیستم داوری برای بررسی کد کاربران و تست خودکار آن‌ها

---


## 🧪 تست‌ها

### 1. تست‌های اصلی API (`api/tests.py`)

* تست امانت گرفتن کتاب
* تست محدودیت امانت بیش از ۳ کتاب
* تست بازگرداندن کتاب
* تست دسترسی کاربران به اکشن‌ها
* تست لیست کردن کتاب‌ها

### 2. تست‌های داوری (`judge/tests.py`)

* بررسی صحت عملکرد API برای کاربر Member، Librarian و Admin
* تست محدودیت‌ها و مجوزها
* بررسی صحت امانت و بازگرداندن کتاب
* تست ایجاد کتاب توسط Admin و جلوگیری از ایجاد توسط Member
* قابل اجرا با دستور:

```bash
python manage.py test judge
```

---

## 🏆 سیستم داوری (Judge)

### 1. شرح عملکرد

* تست‌های موجود در `judge/tests.py` به صورت خودکار اجرا می‌شوند
* خروجی تست‌ها به همراه تعداد موفق، ناموفق و خطاها استخراج می‌شود
* نمره درصدی به صورت خودکار محاسبه می‌شود
* نتیجه در فایل `judge_results.json` ذخیره می‌شود

### 2. اسکریپت اجرای مجدد

* فایل: `rerun_judge.py`

```bash
python rerun_judge.py
```

* این اسکریپت:

  * تست‌ها را اجرا می‌کند
  * خروجی را در ترمینال نشان می‌دهد
  * فایل JSON با جزئیات نتیجه تولید می‌کند

### 3. نمونه خروجی JSON

```json
{
    "timestamp": "2025-10-25T10:45:12.731221",
    "total_tests": 8,
    "passed": 8,
    "failed": 0,
    "errors": 0,
    "duration_seconds": 2.54,
    "score": 100.0,
    "success": true
}
```

---

## ✅ نتایج و خروجی

* تمامی عملیات CRUD کتاب و Borrow/Return به درستی مدیریت می‌شوند
* تست‌های API پوشش کامل مسیرهای اصلی پروژه را دارند
* تست‌های داوری امکان بررسی خودکار کدهای کاربران را فراهم می‌کنند
* سیستم داوری خروجی JSON تولید می‌کند و درصد موفقیت را مشخص می‌کند
